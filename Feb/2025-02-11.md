## 날짜: 2025-02-11


### 새로 배운 내용
#### Trampoline 사용법및 실습
- 컨테이너 환경에서의 배포과정을 실습해보았다
### 배포 방법
1. 필요한 파일들을 git에서 가지고 온다
2. git에서 가지고 온 파일든은 D2Hub에 올라오며 자동으로 빌드가 된다
3. 배포를 하는 레포에서의 yaml파일에 D2Hub의 경로를 잘 설정해 둔다
4. 배포하는 레포를 Kargo에서 앱을 생성해주며 Git불러오기를 통해 최신버전을 불러오고 배포를 해준다

### 가장 많이 하는 실수
- front인지 back인지 db인지 경로를 잘못 지정하는 경우가 있다고 한다
- D2Hub에 필요한 컨테이너를 불러오지 않고 배포하는 컨테이너만 들고오는 경우가 있다고 한다

### 오늘 생긴 문제점
- 리소스의 부족 문제인지 노드를 사용할수 없다는 문제가 생긴다
    ```
    [2025-02-11T07:41:35Z] frontend-775fddbf68-2ksjd: 0/4 nodes are available: 1 node(s) had taint {node-role.dkosv3.9rum.cc/lb: true}, that the pod didn't tolerate, 1 node(s) had taint {node-role.kubernetes.io/master: }, that the pod didn't tolerate, 2 node(s) had taint {node.kubernetes.io/unreachable: }, that the pod didn't tolerate. 
    ```

#### k8s와 Docker는 무엇인가
- **쿠버네티스(k8s)**: Kubernetes(쿠버네티스)는 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링 및 관리하기 위한, "컨테이너 오케스트레이션(조율, 관리)" 플랫폼이다
### 필요한 지식
- containerd, Docker, Openshift 등과 같은 컨테이너 기술 스택
- 서버리스, 오케스트레이션, 로드 밸런싱, 오토 스케일링 등과 같은 클라우드 컴퓨팅 기술에 대한 사용 경험
- 운영체제 및 네트워크 관련 지식

### 주요 개념
- **Pod**: 파드(Pod)는 Kubernetes의 가장 기본적인 배포 단위로, 하나 이상의 컨테이너로 구성된다. 같은 파드 내의 컨테이너들은 동일한 노드에서 실행되며, 네트워크와 저장소 리소스를 공유한다.
- **Service**: 서비스(Service)는 파드 집합에 대한 단일 진입점을 제공한다. 쉽게 말해서 파드에서 실행 중인 컨테이너를 외부로 노출시켜 서비스의 주소를 통해 접근할 수 있게 만들어 준다. 파드는 동적으로 생성되고 제거될 수 있기 때문에 서비스를 통해 안정적인 네트워크 주소를 제공받을 필요가 있다.
- **ReplicaSet**: 레플리카셋(ReplicaSet)은 지정된 수의 파드 복제본이 항상 실행되도록 보장한다. 노드 장애나 파드 장애 시 자동으로 새로운 파드를 생성하여 개수를 일정하게 유지하는 역할을 한다.
- **Deployment**: 디플로이먼트(Deployment)는 파드 또는 레플리카셋의 선언적 업데이트를 제공한다. 애플리케이션은 한번 배포되고 끝이 아니라 새로운 기능 개발이나 버그 패치 등으로 꾸준히 업데이트가 된다. 이럴 때마다 서버가 중단되는 것은 바람직하지 않다. 디플로이먼트는 이러한 문제를 해결하기 위한 Kubernetes의 핵심 기능 중 하나이며, 롤링 업데이트나 롤백과 같은 고급 기능을 지원한다.

#### Docker
- **Docker**: 초기에 LXC(리눅스 컨테이너스)라는 커널 컨테이너 기술을 이용하여 만든 컨테이너 기술 중 하나.

### 특징
- 운영체제를 가상화하지 않는 컨테이너 기술이니만큼 가상머신에 비해서 가벼우며, VM을 포함하여 한 대의 서버에 여러 개의 서비스를 구동하기 좋다.
- 보안상, 서비스가 털리더라도 원래의 서버에 영향을 미치기가 쉽지 않은 격리된 구조이니만큼, 가상화의 장점을 상당 부분 활용할 수 있다.
- 가상머신(VM)들과 달리, 기존 리눅스 자원(디스크, 네트워크 등)을 그대로 활용할 수 있어서 여러 서비스들을 한 서버에 때려 박아 돌리기가 좋은 편이다.
- 리눅스 커널 2.6.32-431 이상에서 지원한다. CentOS 기준으로는 CentOS 6.5 이상을 요구한다.
- 다른 컨테이너의 환경을 쉽게 그대로 재현할 수 있는 이미지를 제공한다.